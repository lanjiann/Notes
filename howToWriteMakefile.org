#+TITLE: Write The Makefile with Me
#+VERSION: V1.0
#+AUTHOR: Hao Chen
#+STARTUP: entitiespretty

* Table of Contents                                      :TOC_4_org:noexport:
- [[1 概述 - 1][1 概述 - 1]]
  - [[1.1 关于程序的编译和链接 - 1][1.1 关于程序的编译和链接 - 1]]
- [[2 makefile介绍 - 3][2 makefile介绍 - 3]]
  - [[2.1 makefile的规则 - 3][2.1 makefile的规则 - 3]]
  - [[2.2 一个示例 - 4][2.2 一个示例 - 4]]
  - [[2.3 make是如何工作的 - 5][2.3 make是如何工作的 - 5]]
  - [[2.4 makefile中使用变量 - 5][2.4 makefile中使用变量 - 5]]
  - [[2.5 让make自动推导 - 6][2.5 让make自动推导 - 6]]
  - [[2.6 另类风格的makefiles - 7][2.6 另类风格的makefiles - 7]]
  - [[2.7 清空目标文件的规则 - 7][2.7 清空目标文件的规则 - 7]]
  - [[2.8 Makefile里有什么？ - 8][2.8 Makefile里有什么？ - 8]]
  - [[2.9 Makefile的文件名 - 8][2.9 Makefile的文件名 - 8]]
  - [[2.10 引用其它的Makefile - 8][2.10 引用其它的Makefile - 8]]
  - [[2.11 环境变量MAKEFILES - 9][2.11 环境变量MAKEFILES - 9]]
  - [[2.12 make的工作方式 - 9][2.12 make的工作方式 - 9]]
- [[3 书写规则 - 11][3 书写规则 - 11]]
  - [[3.1 规则举例 - 11][3.1 规则举例 - 11]]
  - [[3.2 规则的语法 - 11][3.2 规则的语法 - 11]]
  - [[3.3 在规则中使用通配符 - 12][3.3 在规则中使用通配符 - 12]]
  - [[3.4 文件搜寻 - 13][3.4 文件搜寻 - 13]]
  - [[3.5 伪目标 - 14][3.5 伪目标 - 14]]
  - [[3.6 多目标 - 15][3.6 多目标 - 15]]
  - [[3.7 静态模式 - 15][3.7 静态模式 - 15]]
  - [[3.8 自动生成依赖性 - 16][3.8 自动生成依赖性 - 16]]
- [[4 书写命令 - 19][4 书写命令 - 19]]
  - [[4.1 显示命令 - 19][4.1 显示命令 - 19]]
  - [[4.2 命令执行 - 19][4.2 命令执行 - 19]]
  - [[4.3 命令出错 - 20][4.3 命令出错 - 20]]
  - [[4.4 嵌套执行make - 20][4.4 嵌套执行make - 20]]
  - [[4.5 定义命令包 - 22][4.5 定义命令包 - 22]]
- [[5 使用变量 - 23][5 使用变量 - 23]]
  - [[5.1 变量的基础 - 23][5.1 变量的基础 - 23]]
  - [[5.2 变量中的变量 - 24][5.2 变量中的变量 - 24]]
  - [[5.3 变量高级用法 - 25][5.3 变量高级用法 - 25]]
  - [[5.4 追加变量值 - 27][5.4 追加变量值 - 27]]
  - [[5.5 override指示符 - 28][5.5 override指示符 - 28]]
  - [[5.6 多行变量 - 28][5.6 多行变量 - 28]]
  - [[5.7 环境变量 - 29][5.7 环境变量 - 29]]
  - [[5.8 目标变量 - 29][5.8 目标变量 - 29]]
  - [[5.9 模式变量 - 30][5.9 模式变量 - 30]]
- [[6 使用条件判断 - 31][6 使用条件判断 - 31]]
  - [[6.1 示例 - 31][6.1 示例 - 31]]
  - [[6.2 语法 - 32][6.2 语法 - 32]]
- [[7 使用函数 - 35][7 使用函数 - 35]]
  - [[7.1 函数的调用语法 - 35][7.1 函数的调用语法 - 35]]
  - [[7.2 字符串处理函数 - 36][7.2 字符串处理函数 - 36]]
  - [[7.2.1 subst - 36][7.2.1 subst - 36]]
  - [[7.2.2 patsubst - 36][7.2.2 patsubst - 36]]
  - [[7.2.3 strip - 36][7.2.3 strip - 36]]
  - [[7.2.4 findstring - 37][7.2.4 findstring - 37]]
  - [[7.2.5 filter - 37][7.2.5 filter - 37]]
  - [[7.2.6 filter-out - 37][7.2.6 filter-out - 37]]
  - [[7.2.7 sort - 38][7.2.7 sort - 38]]
  - [[7.2.8 word - 38][7.2.8 word - 38]]
  - [[7.2.9 wordlist - 38][7.2.9 wordlist - 38]]
  - [[7.2.10 words - 38][7.2.10 words - 38]]
  - [[7.2.11 firstword - 39][7.2.11 firstword - 39]]
  - [[7.3 文件名操作函数 - 39][7.3 文件名操作函数 - 39]]
  - [[7.3.1 dir - 39][7.3.1 dir - 39]]
  - [[7.3.2 notdir - 39][7.3.2 notdir - 39]]
  - [[7.3.3 suffix - 40][7.3.3 suffix - 40]]
  - [[7.3.4 basename - 40][7.3.4 basename - 40]]
  - [[7.3.5 addsuffix - 40][7.3.5 addsuffix - 40]]
  - [[7.3.6 addprefix - 40][7.3.6 addprefix - 40]]
  - [[7.3.7 join - 41][7.3.7 join - 41]]
  - [[7.4 foreach函数 - 41][7.4 foreach函数 - 41]]
  - [[7.5 if函数 - 41][7.5 if函数 - 41]]
  - [[7.6 call函数 - 42][7.6 call函数 - 42]]
  - [[7.7 origin函数 - 42][7.7 origin函数 - 42]]
  - [[7.8 shell函数 - 43][7.8 shell函数 - 43]]
  - [[7.9 控制make的函数 - 43][7.9 控制make的函数 - 43]]
- [[8 make 的运行 - 45][8 make 的运行 - 45]]
  - [[8.1 make的退出码 - 45][8.1 make的退出码 - 45]]
  - [[8.2 指定Makefile - 45][8.2 指定Makefile - 45]]
  - [[8.3 指定目标 - 45][8.3 指定目标 - 45]]
  - [[8.4 检查规则 - 47][8.4 检查规则 - 47]]
  - [[8.5 make的参数 - 47][8.5 make的参数 - 47]]
- [[9 隐含规则 - 49][9 隐含规则 - 49]]
  - [[9.1 使用隐含规则 - 49][9.1 使用隐含规则 - 49]]
  - [[9.2 隐含规则一览 - 50][9.2 隐含规则一览 - 50]]
  - [[9.3 隐含规则使用的变量 - 52][9.3 隐含规则使用的变量 - 52]]
  - [[9.3.1 关于命令的变量 - 52][9.3.1 关于命令的变量 - 52]]
  - [[9.3.2 关于命令参数的变量 - 53][9.3.2 关于命令参数的变量 - 53]]
  - [[9.4 隐含规则链 - 53][9.4 隐含规则链 - 53]]
  - [[9.5 定义模式规则 - 54][9.5 定义模式规则 - 54]]
  - [[9.5.1 模式规则介绍 - 54][9.5.1 模式规则介绍 - 54]]
  - [[9.5.2 模式规则示例 - 54][9.5.2 模式规则示例 - 54]]
  - [[9.5.3 自动化变量 - 55][9.5.3 自动化变量 - 55]]
  - [[9.5.4 模式的匹配 - 56][9.5.4 模式的匹配 - 56]]
  - [[9.5.5 重载内建隐含规则 - 56][9.5.5 重载内建隐含规则 - 56]]
  - [[9.6 老式风格的“后缀规则” - 57][9.6 老式风格的“后缀规则” - 57]]
  - [[9.7 隐含规则搜索算法 - 57][9.7 隐含规则搜索算法 - 57]]
- [[10 使用make更新函数库文件 - 59][10 使用make更新函数库文件 - 59]]
  - [[10.1 函数库文件的成员 - 59][10.1 函数库文件的成员 - 59]]
  - [[10.2 函数库成员的隐含规则 - 59][10.2 函数库成员的隐含规则 - 59]]
  - [[10.3 函数库文件的后缀规则 - 60][10.3 函数库文件的后缀规则 - 60]]
  - [[10.4 注意事项 - 60][10.4 注意事项 - 60]]
- [[11 后序 - 61][11 后序 - 61]]

* 1 概述 - 1
** 1.1 关于程序的编译和链接 - 1

* 2 makefile介绍 - 3
** 2.1 makefile的规则 - 3
** 2.2 一个示例 - 4
** 2.3 make是如何工作的 - 5
** 2.4 makefile中使用变量 - 5
** 2.5 让make自动推导 - 6
** 2.6 另类风格的makefiles - 7
** 2.7 清空目标文件的规则 - 7
** 2.8 Makefile里有什么？ - 8
** 2.9 Makefile的文件名 - 8
** 2.10 引用其它的Makefile - 8
** 2.11 环境变量MAKEFILES - 9
** 2.12 make的工作方式 - 9

* 3 书写规则 - 11
** 3.1 规则举例 - 11
** 3.2 规则的语法 - 11
** 3.3 在规则中使用通配符 - 12
** 3.4 文件搜寻 - 13
** 3.5 伪目标 - 14
** 3.6 多目标 - 15
** 3.7 静态模式 - 15
** 3.8 自动生成依赖性 - 16

* 4 书写命令 - 19
** 4.1 显示命令 - 19
** 4.2 命令执行 - 19
** 4.3 命令出错 - 20
** 4.4 嵌套执行make - 20
** 4.5 定义命令包 - 22

* 5 使用变量 - 23
** 5.1 变量的基础 - 23
** 5.2 变量中的变量 - 24
** 5.3 变量高级用法 - 25
** 5.4 追加变量值 - 27
** 5.5 override指示符 - 28
** 5.6 多行变量 - 28
** 5.7 环境变量 - 29
** 5.8 目标变量 - 29
** 5.9 模式变量 - 30

* 6 使用条件判断 - 31
** 6.1 示例 - 31
** 6.2 语法 - 32

* 7 使用函数 - 35
** 7.1 函数的调用语法 - 35
** 7.2 字符串处理函数 - 36
** 7.2.1 subst - 36
** 7.2.2 patsubst - 36
** 7.2.3 strip - 36
** 7.2.4 findstring - 37
** 7.2.5 filter - 37
** 7.2.6 filter-out - 37
** 7.2.7 sort - 38
** 7.2.8 word - 38
** 7.2.9 wordlist - 38
** 7.2.10 words - 38
** 7.2.11 firstword - 39
** 7.3 文件名操作函数 - 39
** 7.3.1 dir - 39
** 7.3.2 notdir - 39
** 7.3.3 suffix - 40
** 7.3.4 basename - 40
** 7.3.5 addsuffix - 40
** 7.3.6 addprefix - 40
** 7.3.7 join - 41
** 7.4 foreach函数 - 41
** 7.5 if函数 - 41
** 7.6 call函数 - 42
** 7.7 origin函数 - 42
** 7.8 shell函数 - 43
** 7.9 控制make的函数 - 43

* 8 make 的运行 - 45
** 8.1 make的退出码 - 45
** 8.2 指定Makefile - 45
** 8.3 指定目标 - 45
** 8.4 检查规则 - 47
** 8.5 make的参数 - 47

* 9 隐含规则 - 49
** 9.1 使用隐含规则 - 49
** 9.2 隐含规则一览 - 50
** 9.3 隐含规则使用的变量 - 52
** 9.3.1 关于命令的变量 - 52
** 9.3.2 关于命令参数的变量 - 53
** 9.4 隐含规则链 - 53
** 9.5 定义模式规则 - 54
** 9.5.1 模式规则介绍 - 54
** 9.5.2 模式规则示例 - 54
** 9.5.3 自动化变量 - 55
** 9.5.4 模式的匹配 - 56
** 9.5.5 重载内建隐含规则 - 56
** 9.6 老式风格的“后缀规则” - 57
** 9.7 隐含规则搜索算法 - 57

* 10 使用make更新函数库文件 - 59
** 10.1 函数库文件的成员 - 59
** 10.2 函数库成员的隐含规则 - 59
** 10.3 函数库文件的后缀规则 - 60
** 10.4 注意事项 - 60

* 11 后序 - 61
